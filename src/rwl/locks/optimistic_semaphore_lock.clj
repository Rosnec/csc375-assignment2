

(let [write-fn
      (fn [func args] (loop [b nil] (if P
                                      
                                      (let [new-b (compare-and-set! atomic-x
                                                                  
